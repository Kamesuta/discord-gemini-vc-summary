# 音声ランダムサンプル作成手順

OBSで録画したマルチトラックの動画ファイルから、ランダムな1分間の音声サンプルを10個作成する手順をまとめます。

## 1. 動画の長さを取得

まず、`ffprobe` を使用して動画の総再生時間を秒単位で取得します。これにより、ランダムな開始位置を決定するための上限値がわかります。

```sh
ffprobe -v error -show_entries format=duration -of default=noprint_wrappers=1:nokey=1 "G:\共有ドライブ\kame.drive\Videos\OBS\2025-08-07_21-16-02.mp4"
```

## 2. 保存用ディレクトリの作成

次に、作成した音声ファイルを保存するための `audio` ディレクトリを作成します。

```sh
mkdir audio
```

## 3. 音声サンプルの切り出し

`ffmpeg` を使用して、異なる開始位置から1分間の音声を切り出します。
OBSのマルチトラック音声を1つにミックスするために `-filter_complex "[0:a]amix"` オプションを使用します。

以下はコマンドの基本形です。`[開始秒数]` と `[出力ファイル名]` を変更して必要な数だけ実行します。

```sh
ffmpeg -ss [開始秒数] -i "G:\共有ドライブ\kame.drive\Videos\OBS\2025-08-07_21-16-02.mp4" -t 60 -filter_complex "[0:a]amix" audio/[出力ファイル名]
```

### 実行例

実際に実行したコマンドの例です。

```sh
# 最初に作成したファイルの名前を変更
move audio\random_sample.mp3 audio\random_sample_01.mp3

# 2つ目以降のサンプルを作成 (これを10まで繰り返す)
ffmpeg -ss 200 -i "G:\共有ドライブ\kame.drive\Videos\OBS\2025-08-07_21-16-02.mp4" -t 60 -filter_complex "[0:a]amix" audio/random_sample_02.mp3
```

## 4. 完了

上記の手順を繰り返すことで、`audio` ディレクトリ内に `random_sample_01.mp3` から `random_sample_10.mp3` までの10個の音声サンプルファイルが作成されます。
